# PART 1. 데이터 모델링의 이해

## Ch01. 데이터 모델링의 이해

## I. 데이터 모델의 이해

> ### DB의 모델링이란?

: 현실 세계를 `단순화` 하여 표현하는 기법

> ### 모델링의 특징

- 추상화 (Abstraction)
  - 현실 세계를 일정한 형식으로 표현
  - 아이디어나 개념을 `간략하게` 표현하는 과정
- 단순화 (Simplification)
  - 정해진 표기법으로 단순하고 쉽게 표현
- 명확화 (Clarity)
  - 불분명함 제거
  - 명확하게 해석할 수 있도록 기술

> ### 모델링의 세 가지 관점

- 데이터 관점 (What, Data)
  - 어떤 데이터들이 업무와 `얽혀` 있는가
  - 데이터 간 `관계`(relation)가 있는가
- 프로세스 관점 (How, Process)
  - 업무가 실제로 `처리`하는 일이 무엇인가
  - 앞으로 `처리`해야 하는 일이 무엇인가
- 데이터와 프로세스의 상관 관점 (Data Vs. Process, Interaction)
  - 프로세스의 `흐름`에 따라 데이터가 어떤 `영향`을 받는가?

> ### 데이터 모델링 시 유의점

✓ 데이터 품질(신뢰도, 정확성 등)을 보장하기 위해 아래 사항을 유의해야 한다.

- 중복 (Duplication)
  - 같은 데이터가 여러 엔티티에 `중복 저장되는 현상을 지양`해야 한다.
- 비유연성 (Inflexibility)
  - 데이터 모델과 프로세스를 `분리하여 유연성을 높여야` 한다.
  - 사소한 변경에도 데이터 모델이 수시로 변경될 수 있기 때문
- 비일관성 (Inconsistency)
  - 데이터 모델링 시 데이터 간의 `연관관계를 명확하게 정의`해야 한다.

> ### 모델링의 세 가지 단계

- 개념적 데이터 모델링
  - Conceptual Data Modeling
  - 전사적 데이터 모델링 수행 시 행해짐
  - `추상화 레벨`이 가장 높은 모델링
  - `업무 중심`적이고 `포괄적`인 수준의 모델링
- 논리적 데이터 모델링
  - Logical Data Modeling
  - `재사용성`이 가장 높은 모델링
  - DB 모델에 대한 `key`, `attribute`, `relation` 등을 포함하는 단계
- 물리적 데이터 모델링
  - Physical Data Modeling
  - 성능, 가용성 등의 물리적인 성격을 고려

> ### ANSI-SPARC 아키텍처의 스키마(schema) 3단계 구조와 데이터 독립성

**✓ ANSI-SPARC 아키텍처** : 1975년에 제안된 DBMS의 추상적인 설계 표준

- 외부 스키마 (External Schema)
  - 사용자 관점
  - Multiple User's View 단계
  - `각 사용자`가 보는 DB의 스키마 정의
- 개념 스키마 (Conceptual Schema)
  - 통합된 관점
  - Community View of DB 단게
  - `모든 사용자`가 보는 DB의 스키마를 통합하여 전체 DB 표현
  - DB에 `저장되는 데이터` 및 `데이터 간의 관계` 표현
- 내부 스키마 (Internal Schema)
  - 물리적인 관점
  - Physical Representation 단계
  - 실질적인 데이터의 `저장 구조`나 `컬럼` 정의, `인덱스` 등 포함

**3단계 스키마 구조가 보장하는 독립성**

- 분리 목적
  - DB에 대한 `사용자들의 관점`과 DB가 실제로 표현되는 `물리적인 방식`을 분리하여 `독립성` 보장
- `논리적 독립성`
  - 개념 스키마가 변경돼도 외부 스키마는 영향 받지 않음
  - 사용자 특성에 맞는 변경 가능 및 통합 구조 변경 가능
- `물리적 독립성`
  - 내부 스키마가 변경돼도 외부/개념 스키마는 영향 받지 않은

> ### ERD (Entity Relationship Diagram)

| ERD 표기 방식       | 사진  | 참고                                              |
| ------------------- | ----- | ------------------------------------------------- |
| Peter chen          | empty | 실무 사용은 드묾                                  |
| IDEF1X              | empty | ERWin에서 사용되는 모델                           |
| IE/Crow's Foot      | empty | ERWin, ERStudio에서 사용되는 모델                 |
| Min-Max/ISO         | empty | 각 엔티티의 참여도를 좀 더 상세히 나타내는 표기법 |
| UML                 | empty | SW 공학에서 주로 사용되는 모델                    |
| Case\*Method/Barker | empty | Oracle에서 사용되는 모델                          |

<br>

## II. Entity

> ### Entity란?

- `식별`이 가능한 객체
- 업무에서 쓰이는 데이터를 `용도`별로 분류한 그룹
- 명확한 조건이 기준이 돼야 함
- 상세하게 나타내기 위해 속성(attribute)를 갖음 → Column

> ### Entity의 특징

- 업무에서 쓰이는 정보여야 함
- `Unique`함을 보장할 수 있는 `식별자`가 있어야 함
- 2개 이상의 인스턴스를 가지고 있어야 함
- 반드시 `속성`을 가지고 있어야 함
- 다른 Entity와 1개 이상의 `relation`을 가지고 있어야 함

> ### Entity의 분류

**유형 vs 무형**

- 유형 엔티티
  - 물리적인 형태 존재
  - 안정적
  - 지속적
  - ex. 상품, 회원 등
- 개념 엔티티
  - 물리적인 형태 없음
  - 개념적
  - ex. 부서, 학과
- 사건 엔티티
  - 행위를 함으로써 발생
  - 빈번함
  - 통계 자료로 이용 가능
  - 주문, 이벤트 응모

**발생 시점**

- 기본 엔티티
  - 업무에 원래 존재하는 정보
  - 독립적으로 생성되며, 자식 엔티티를 가질 수 있음
  - ex. 상품, 회원, 사원, 부서
- 중심 엔티티
  - 기본 엔티티로부터 파생되고, 행위 엔티티 생성
  - 업무에 있어서 중심적인 역할을 함
  - 데이터의 양이 많이 발생
  - ex. 주문, 매출, 계약
- 행위 엔티티
  - 2개 이상의 엔티티로부터 파생
  - 데이터가 자주 변경되거나 증가
  - 주문 내역, 이벤트 응모 이력 등

## III. Attribute

> ### 속성이란?

- 사물이나 개념의 특징을 설명해줄 수 있는 항목들
- 의미상 더 이상 `쪼개지지 않는 레벨`이어야 함
- 하나의 엔티티는 하나 이상의 속성을 갖음
- 프로세스에 필요한 항목이어야 함

> ### 속성값

- 엔티티에 속한 하나의 인스턴스를 구체적으로 나타내주는 데이터
- 하나의 속성은 한 개의 속성값만 가질 수 있음
- 여러 속성값을 갖는 경우, 엔티티를 분리하는게 바람직 함

> ### Entity, Instance, Attribute, Attribute Value

- 1개의 Entity는 2개 이상의 Instance를 가짐
- 1개의 Instance는 2개 이상의 Attribute를 가짐
- 1개의 Attribute는 하나의 Attribute Value를 가짐

> ### 분류

**특성에 따른 분류**

- 기본 속성
  - 업무 프로세스 분석을 바로 정의가 가능한 속성
- 설계 속성
  - 업무에 존재하지는 않지만 설계 과정에서 합리적인 모델링을 위해 도출해낸 속성
  - ex. 학번 → 인스턴스에 유니크함을 보장해줌
- 파생 속성
  - 다른 속성의 속성값을 계산하거나 특정한 규칙으로 변형하여 생성한 속성
  - ex. 계산된 값이나 가공된 값

**구성방식에 따른 분류**

- PK 속성
  - 엔티티에 속한 각 인스턴스에 `유니크`함 부여
- FK 속성
  - 다른 엔티티와 관계를 맺게 해주는 매개체 역함
- 일반 속성
  - PK와 FK를 제외한 속성

> ### 도메인

- 속성이 가질 수 있는 속성값의 범위
- ex. 우편번호 → 다섯 자리 숫자(`범위`) → 데이터 타입과 크기
- 용어사전: 용어의 혼란을 없애기 위해 사용
- 시스템 카탈로그: 시스템 자체에 관련이 있는 데이터를 담고 있는 DB

## IV. Relationship

> ### 관계란?

- 엔티티와 엔티티와의 관계
- 어떠한 연관성이 있는지 타입을 분류하여 `존재 관계`와 `행위 관계`로 나눌 수 있음

> ### 존재 관계

- 존재 자체로 연관성이 있는 관계
- ex. 직원과 부서, 학생과 학과

> ### 행위 관계

- 특정한 행위를 함으로써 연관성이 생기는 관계
- ex. 회원과 주문(주문하다), 학생과 출석부(출석하다)

> ### 표기법

- 관계명
  - Membership, 관계의 이름
  - 엔티티와 엔티티가 어떠한 관계를 맺고 있는지 나타내주는 문장
  - 모든 관계는 두 개의 관계명을 가지고 있음
  - 반드시 `명확한 문장`이어야 하고, `현재형`이어야 함
- 관계차수
  - Cardinality, 관계에 참여하는 수
  - 1:1, 1:N, N:M
- 관계선택사양
  - Optionality, 필수인지 선택인지의 여부
  - 필수적 관계: 참여자가 반드시 존재
  - 선택적 관계: 참여자가 없을 수도 있음

## V. Identifiers

> ### 식별자란?

- 각각의 인스턴스를 구분 가능하게 만들어주는 속성

> ### 주식별자

- PK에 해당하는 속성
- 하나 또는 여러 개의 속성이 주식별자가 될 수 있음

<br>

- 유일성: 각 인스턴스에 유니크함을 부여하여 식별이 가능하도록 한다.
- 최소성: 유일성을 보장하는 최소 개수의 속성이어야 한다.
- 불변성: 속성값이 변하지 않아야 한다.
- 존재성: 속성값이 NULL일 수 없다.

> ### 분류

- 대표성 여부
  - 주식별자
    - 유일성, 최소성, 불변성, 존재성을 가진 대표 식별자
    - 다른 엔티티와 참조 관계로 연결
  - 보조식별자
    - 인스턴스를 식별할 수는 있지만 대표 식별자는 아님
    - 다른 엔티티와 참조 관계로 연결되지 않음
- 스스로 생성되었는지
  - 내부식별자
    - 엔티티 내부에서 스스로 생성된 식별자
  - 외부식별자
    - 다른 엔티티에서 온 식별자
    - 다른 엔티티와의 연결고리 역할
- 단일 속성의 여부
  - 단일 식별자
    - 하나의 속성으로 구성된 식별자
  - 복합 식별자
    - 두 개 이상의 속성으로 구성된 식별자
- 대체 여부
  - 원조식별자
    - 업무 프로세스에 존재하는 식별자
    - 가공되지 않은 원래의 식별자
  - 대리식별자
    - 주식별자의 속성이 두 개 이상인 경우, 그 속성들을 하나로 묶어서 사용하는 식별자

> ### 식별 관계와 비식별 관계

- 식별 관계
  - 부모 엔티티의 식별자가 자식 엔티티의 `주식별자`가 되는 관계
  - 부모 엔티티가 있어야 생성 가능
  - 단일 식별자 → 1:1
  - 복합 식별자 → 1:N
- 비식별 관계
  - 부모 엔티티의 식별자가 자식 엔티티의 일반 속성이 되는 관계
